{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block header_title %}{{ header_title }}{% endblock %}

{% block content %}

<!-- Toolbar row -->
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <p class="text-muted mb-0">
        Showing <strong>{{ products|length }}</strong> product{{ products|length|pluralize }}
    </p>
    <a href="{% url 'products:create' %}" class="btn btn-primary">
        <i class="bi bi-plus-circle me-1"></i> Add New Product
    </a>
</div>

<!-- Product Grid -->
{% if products %}
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for product in products %}
    <div class="col">
        <div class="product-card card h-100 shadow-sm">

            <!-- Emoji / thumbnail -->
            <div class="product-card__thumb text-center py-4 fs-1">
                {{ product.emoji }}
            </div>

            <div class="card-body d-flex flex-column">
                <!-- Category badge -->
                <span class="badge badge-category mb-2 align-self-start">
                    {{ product.category }}
                </span>

                <h5 class="card-title">{{ product.name }}</h5>

                <p class="card-text text-muted flex-grow-1">
                    {# Truncate long descriptions to 90 chars #}
                    {{ product.description|truncatechars:90 }}
                </p>

                <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="product-price">${{ product.price }}</span>

                    <a href="{% url 'products:show' product.id %}" class="btn btn-sm btn-outline-primary">
                        View Details <i class="bi bi-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>

        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<!-- Empty state (conditional rendering, Step 8) -->
<div class="empty-state text-center py-5">
    <div class="fs-1 mb-3">ðŸ“¦</div>
    <h4>No Products Yet</h4>
    <p class="text-muted">Be the first to add a product to the store.</p>
    <a href="{% url 'products:create' %}" class="btn btn-primary mt-2">
        <i class="bi bi-plus-circle me-1"></i> Add First Product
    </a>
</div>
{% endif %}

{% endblock %}